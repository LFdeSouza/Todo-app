(()=>{"use strict";class e{constructor(e){this.id=Math.random().toString(),this.name=e,this.tasks=[]}}class t{constructor(e,t,s){this.taskName=e,this.id=Math.random().toString(),this.description=t,this.dueDate=s,this.completed=!1}}class s{static savedProjects=JSON.parse(localStorage.getItem("projectList"))||[];static updateStorage(){localStorage.setItem("projectList",JSON.stringify(this.savedProjects))}static addProject(t){const s=new e(t);this.savedProjects.push(s),this.updateStorage()}static saveSelectedProject(e){this.savedProjects.forEach((t=>{t.id===e&&localStorage.setItem("selectedProject",JSON.stringify(t))}))}static getSelectedProjectId(){const e=JSON.parse(localStorage.getItem("selectedProject"))||null;if(e)return e.id}static getSelectedProjectName(){const e=JSON.parse(localStorage.getItem("selectedProject"))||null;if(e)return e.name}static getSelectedProjectIndex(){JSON.parse(localStorage.getItem("selectedProject"));return this.savedProjects.findIndex((e=>e.id===this.getSelectedProjectId()))}static removeProject(){const e=this.getSelectedProjectIndex();this.savedProjects.splice(e,1),this.updateStorage(),localStorage.setItem("selectedProject",JSON.stringify(null))}static addTask(e,s,c){const a=new t(e,s,c),d=this.getSelectedProjectIndex();this.savedProjects[d].tasks.push(a),this.updateStorage()}static getTasks(){const e=this.getSelectedProjectIndex();return this.savedProjects[e].tasks}static markCompletedTask(e){const t=this.getSelectedProjectIndex();this.savedProjects[t].tasks.find((t=>t.id===e.id)).completed=e.checked,this.updateStorage()}static updateDueDate(e){const t=this.getSelectedProjectIndex();this.savedProjects[t].tasks.find((t=>t.id===e.id)).dueDate=e.value,this.updateStorage()}static deleteTask(e){const t=this.getSelectedProjectIndex(),c=this.savedProjects[t].tasks.findIndex((t=>t.id===e.id));s.savedProjects[t].tasks.splice(c,1),this.updateStorage()}}const c=document.querySelector(".time");function a(){let e=new Date,t=e.getHours(),s=e.getMinutes(),o=e.getSeconds();c.innerHTML=`${t}<span>:</span>${d(s)}<span>:</span>${d(o)}`,setTimeout(a,1e3)}function d(e){return parseInt(e)<10?"0"+e:e}document.querySelector(".add-project"),window.addEventListener("load",(e=>{a(),i(),y()}));const o=document.querySelector("#project-form");let r=document.querySelector(".new-project-field");const n=document.querySelector(".project-list");function i(){n.innerHTML="",s.savedProjects.forEach((e=>{const t=document.createElement("li");t.textContent=`${e.name}`,t.dataset.id=e.id,t.dataset.id===s.getSelectedProjectId()&&t.classList.add("active-project"),n.appendChild(t)}))}o.addEventListener("submit",(e=>{e.preventDefault();const t=r.value;""!==t&&null!==t&&(s.addProject(t),i(),r.value=null)})),n.addEventListener("click",(e=>{s.saveSelectedProject(e.target.dataset.id),i(),y()}));const l=document.querySelector(".tasks-title h3"),u=document.querySelector(".delete-project"),S=document.querySelector(".tasks-list"),m=document.querySelector("#task-template"),p=document.querySelector(".open-modal"),g=document.querySelector(".modal"),h=document.querySelector(".modal-form"),j=document.querySelector(".btn-modal-cancel"),k=document.querySelector(".add-task-field"),v=document.querySelector(".add-task-description"),P=document.querySelector("#task-due-date");function y(){s.getSelectedProjectName(),S.innerHTML="",function(){const e=s.getSelectedProjectName();l.textContent=e}(),s.getTasks().forEach((e=>{const t=m.content.cloneNode(!0),s=t.querySelector(".task-name label"),c=t.querySelector(".task-name input"),a=t.querySelector(".task-description"),d=t.querySelector(".task-due-date"),o=t.querySelector(".task-del-icon");c.id=e.id,c.checked=e.completed,s.htmlFor=e.id,s.append(e.taskName),a.textContent=e.description,d.id=e.id,d.value=e.dueDate,o.id=e.id,S.appendChild(t)}))}function f(){k.value=null,v.value=null,P.value=null,g.style.display="none"}p.addEventListener("click",(e=>{g.style.display="block",k.focus()})),j.addEventListener("click",(e=>{f()})),h.addEventListener("submit",(e=>{e.preventDefault(),s.addTask(k.value,v.value,P.value),f(),y()})),S.addEventListener("click",(e=>{"input"===e.target.tagName.toLowerCase()&&s.markCompletedTask(e.target)})),S.addEventListener("click",(e=>{e.target.classList.contains("task-del-icon")&&(s.deleteTask(e.target),y())})),S.addEventListener("change",(e=>{e.target.classList.contains("task-due-date")&&(s.updateDueDate(e.target),y())})),u.addEventListener("click",(e=>{s.removeProject(),i(),y()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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U3hCLGlCQUFpQixVQUFXQyxJQUNuQ0EsRUFBRWEsaUJBQ0Z2RCxFQUFTb0YsUUFBUXhGLEVBQVMyQixNQUFPMUIsRUFBWTBCLE1BQU96QixFQUFReUIsT0FDNUR5RCxJQUNBcEMsT0FJRmlCLEVBQVVwQixpQkFBaUIsU0FBVUMsSUFDSSxVQUFuQ0EsRUFBRWdCLE9BQU8yQixRQUFRQyxlQUNuQnRGLEVBQVN1RixrQkFBa0I3QyxFQUFFZ0IsV0FLakNHLEVBQVVwQixpQkFBaUIsU0FBVUMsSUFDL0JBLEVBQUVnQixPQUFPTixVQUFVb0MsU0FBUyxtQkFDOUJ4RixFQUFTeUYsV0FBVy9DLEVBQUVnQixRQUN0QmQsUUFLSmlCLEVBQVVwQixpQkFBaUIsVUFBV0MsSUFDaENBLEVBQUVnQixPQUFPTixVQUFVb0MsU0FBUyxtQkFDOUJ4RixFQUFTMEYsY0FBY2hELEVBQUVnQixRQUN6QmQsUUFLSmdCLEVBQWlCbkIsaUJBQWlCLFNBQVVDLElBQzFDMUMsRUFBUzJGLGdCQUNUaEQsSUFDQUMsUSIsInNvdXJjZXMiOlsid2VicGFjazovL3RvZG8tYXBwLy4vc3JjL3RvZG9MaXN0LmpzIiwid2VicGFjazovL3RvZG8tYXBwLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIFByb2plY3Qge1xyXG4gIGNvbnN0cnVjdG9yKG5hbWUpIHtcclxuICAgIHRoaXMuaWQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKCk7XHJcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy50YXNrcyA9IFtdO1xyXG4gIH1cclxufVxyXG5cclxuY2xhc3MgVGFzayB7XHJcbiAgY29uc3RydWN0b3IodGFza05hbWUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlKSB7XHJcbiAgICB0aGlzLnRhc2tOYW1lID0gdGFza05hbWU7XHJcbiAgICB0aGlzLmlkID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygpO1xyXG4gICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xyXG4gICAgdGhpcy5kdWVEYXRlID0gZHVlRGF0ZTtcclxuICAgIHRoaXMuY29tcGxldGVkID0gZmFsc2U7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUb2RvTGlzdCB7XHJcbiAgc3RhdGljIHNhdmVkUHJvamVjdHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwicHJvamVjdExpc3RcIikpIHx8IFtdO1xyXG5cclxuICBzdGF0aWMgdXBkYXRlU3RvcmFnZSgpIHtcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwicHJvamVjdExpc3RcIiwgSlNPTi5zdHJpbmdpZnkodGhpcy5zYXZlZFByb2plY3RzKSk7XHJcbiAgfVxyXG4gIHN0YXRpYyBhZGRQcm9qZWN0KHByb2plY3QpIHtcclxuICAgIGNvbnN0IG5ld1Byb2plY3QgPSBuZXcgUHJvamVjdChwcm9qZWN0KTtcclxuICAgIHRoaXMuc2F2ZWRQcm9qZWN0cy5wdXNoKG5ld1Byb2plY3QpO1xyXG4gICAgdGhpcy51cGRhdGVTdG9yYWdlKCk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgc2F2ZVNlbGVjdGVkUHJvamVjdChpZCkge1xyXG4gICAgdGhpcy5zYXZlZFByb2plY3RzLmZvckVhY2goKHByb2plY3QpID0+IHtcclxuICAgICAgaWYgKHByb2plY3QuaWQgPT09IGlkKSB7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJzZWxlY3RlZFByb2plY3RcIiwgSlNPTi5zdHJpbmdpZnkocHJvamVjdCkpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXRTZWxlY3RlZFByb2plY3RJZCgpIHtcclxuICAgIGNvbnN0IHByb2plY3QgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwic2VsZWN0ZWRQcm9qZWN0XCIpKSB8fCBudWxsO1xyXG4gICAgaWYgKHByb2plY3QpIHtcclxuICAgICAgcmV0dXJuIHByb2plY3QuaWQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0U2VsZWN0ZWRQcm9qZWN0TmFtZSgpIHtcclxuICAgIGNvbnN0IHByb2plY3QgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwic2VsZWN0ZWRQcm9qZWN0XCIpKSB8fCBudWxsO1xyXG4gICAgaWYgKHByb2plY3QpIHtcclxuICAgICAgcmV0dXJuIHByb2plY3QubmFtZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXRTZWxlY3RlZFByb2plY3RJbmRleCgpIHtcclxuICAgIGNvbnN0IHByb2plY3QgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwic2VsZWN0ZWRQcm9qZWN0XCIpKSB8fCBudWxsO1xyXG4gICAgY29uc3QgY3VycmVudFByb2plY3QgPSB0aGlzLnNhdmVkUHJvamVjdHMuZmluZEluZGV4KFxyXG4gICAgICAocHJvamVjdCkgPT4gcHJvamVjdC5pZCA9PT0gdGhpcy5nZXRTZWxlY3RlZFByb2plY3RJZCgpXHJcbiAgICApO1xyXG4gICAgcmV0dXJuIGN1cnJlbnRQcm9qZWN0O1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIHJlbW92ZVByb2plY3QoKSB7XHJcbiAgICBjb25zdCBjdXJyZW50UHJvamVjdCA9IHRoaXMuZ2V0U2VsZWN0ZWRQcm9qZWN0SW5kZXgoKTtcclxuICAgIHRoaXMuc2F2ZWRQcm9qZWN0cy5zcGxpY2UoY3VycmVudFByb2plY3QsIDEpO1xyXG4gICAgdGhpcy51cGRhdGVTdG9yYWdlKCk7XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInNlbGVjdGVkUHJvamVjdFwiLCBKU09OLnN0cmluZ2lmeShudWxsKSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYWRkVGFzayh0YXNrTmFtZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUpIHtcclxuICAgIGNvbnN0IHRhc2sgPSBuZXcgVGFzayh0YXNrTmFtZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUpO1xyXG4gICAgY29uc3QgY3VycmVudFByb2plY3QgPSB0aGlzLmdldFNlbGVjdGVkUHJvamVjdEluZGV4KCk7XHJcbiAgICB0aGlzLnNhdmVkUHJvamVjdHNbY3VycmVudFByb2plY3RdLnRhc2tzLnB1c2godGFzayk7XHJcbiAgICB0aGlzLnVwZGF0ZVN0b3JhZ2UoKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBnZXRUYXNrcygpIHtcclxuICAgIGNvbnN0IGN1cnJlbnRQcm9qZWN0ID0gdGhpcy5nZXRTZWxlY3RlZFByb2plY3RJbmRleCgpO1xyXG4gICAgcmV0dXJuIHRoaXMuc2F2ZWRQcm9qZWN0c1tjdXJyZW50UHJvamVjdF0udGFza3M7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgbWFya0NvbXBsZXRlZFRhc2soc2VsZWN0ZWRUYXNrKSB7XHJcbiAgICBjb25zdCBjdXJyZW50UHJvamVjdCA9IHRoaXMuZ2V0U2VsZWN0ZWRQcm9qZWN0SW5kZXgoKTtcclxuICAgIGNvbnN0IHRhc2sgPSB0aGlzLnNhdmVkUHJvamVjdHNbY3VycmVudFByb2plY3RdLnRhc2tzLmZpbmQoXHJcbiAgICAgICh0YXNrKSA9PiB0YXNrLmlkID09PSBzZWxlY3RlZFRhc2suaWRcclxuICAgICk7XHJcbiAgICB0YXNrLmNvbXBsZXRlZCA9IHNlbGVjdGVkVGFzay5jaGVja2VkO1xyXG4gICAgdGhpcy51cGRhdGVTdG9yYWdlKCk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgdXBkYXRlRHVlRGF0ZShzZWxlY3RlZFRhc2spIHtcclxuICAgIGNvbnN0IGN1cnJlbnRQcm9qZWN0ID0gdGhpcy5nZXRTZWxlY3RlZFByb2plY3RJbmRleCgpO1xyXG4gICAgY29uc3QgdGFzayA9IHRoaXMuc2F2ZWRQcm9qZWN0c1tjdXJyZW50UHJvamVjdF0udGFza3MuZmluZChcclxuICAgICAgKHRhc2spID0+IHRhc2suaWQgPT09IHNlbGVjdGVkVGFzay5pZFxyXG4gICAgKTtcclxuICAgIHRhc2suZHVlRGF0ZSA9IHNlbGVjdGVkVGFzay52YWx1ZTtcclxuICAgIHRoaXMudXBkYXRlU3RvcmFnZSgpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGRlbGV0ZVRhc2soc2VsZWN0ZWRUYXNrKSB7XHJcbiAgICBjb25zdCBjdXJyZW50UHJvamVjdCA9IHRoaXMuZ2V0U2VsZWN0ZWRQcm9qZWN0SW5kZXgoKTtcclxuICAgIGNvbnN0IHRhc2sgPSB0aGlzLnNhdmVkUHJvamVjdHNbY3VycmVudFByb2plY3RdLnRhc2tzLmZpbmRJbmRleChcclxuICAgICAgKHRhc2spID0+IHRhc2suaWQgPT09IHNlbGVjdGVkVGFzay5pZFxyXG4gICAgKTtcclxuICAgIFRvZG9MaXN0LnNhdmVkUHJvamVjdHNbY3VycmVudFByb2plY3RdLnRhc2tzLnNwbGljZSh0YXNrLCAxKTtcclxuICAgIHRoaXMudXBkYXRlU3RvcmFnZSgpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgVG9kb0xpc3QgZnJvbSBcIi4vdG9kb0xpc3RcIjtcclxuXHJcbmNvbnN0IHRpbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRpbWVcIik7XHJcbmNvbnN0IGFkZFByb2plY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZC1wcm9qZWN0XCIpO1xyXG5cclxuZnVuY3Rpb24gc2hvd1RpbWUoKSB7XHJcbiAgbGV0IGN1cnJlbnRUaW1lID0gbmV3IERhdGUoKSxcclxuICAgIGhvdXIgPSBjdXJyZW50VGltZS5nZXRIb3VycygpLFxyXG4gICAgbWluID0gY3VycmVudFRpbWUuZ2V0TWludXRlcygpLFxyXG4gICAgc2VjID0gY3VycmVudFRpbWUuZ2V0U2Vjb25kcygpO1xyXG5cclxuICB0aW1lLmlubmVySFRNTCA9IGAke2hvdXJ9PHNwYW4+Ojwvc3Bhbj4ke2FkZFplcm9Ub0Nsb2NrKFxyXG4gICAgbWluXHJcbiAgKX08c3Bhbj46PC9zcGFuPiR7YWRkWmVyb1RvQ2xvY2soc2VjKX1gO1xyXG5cclxuICBzZXRUaW1lb3V0KHNob3dUaW1lLCAxMDAwKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkWmVyb1RvQ2xvY2sodGltZSkge1xyXG4gIHJldHVybiBwYXJzZUludCh0aW1lKSA8IDEwID8gXCIwXCIgKyB0aW1lIDogdGltZTtcclxufVxyXG5cclxuLy9FdmVudDogTG9hZCBwYWdlXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCAoZSkgPT4ge1xyXG4gIHNob3dUaW1lKCk7XHJcbiAgcmVuZGVyUHJvamVjdHMoKTtcclxuICByZW5kZXJUYXNrcygpO1xyXG59KTtcclxuXHJcbi8vRE9NIGVsZW1lbnRzIGZyb20gcHJvamVjdHMgc2VjdGlvblxyXG5jb25zdCBwcm9qZWN0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvamVjdC1mb3JtXCIpO1xyXG5sZXQgcHJvamVjdElucHV0RmllbGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5ldy1wcm9qZWN0LWZpZWxkXCIpO1xyXG5jb25zdCBwcm9qZWN0c0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtbGlzdFwiKTtcclxuXHJcbi8vRXZlbnQ6IEFkZCBib29rIHVwb24gc3VibWlzc2lvblxyXG5wcm9qZWN0Rm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIGNvbnN0IG5ld1Byb2plY3QgPSBwcm9qZWN0SW5wdXRGaWVsZC52YWx1ZTtcclxuICBpZiAobmV3UHJvamVjdCA9PT0gXCJcIiB8fCBuZXdQcm9qZWN0ID09PSBudWxsKSByZXR1cm47XHJcbiAgVG9kb0xpc3QuYWRkUHJvamVjdChuZXdQcm9qZWN0KTtcclxuICByZW5kZXJQcm9qZWN0cygpO1xyXG4gIHByb2plY3RJbnB1dEZpZWxkLnZhbHVlID0gbnVsbDtcclxufSk7XHJcblxyXG5mdW5jdGlvbiByZW5kZXJQcm9qZWN0cygpIHtcclxuICBwcm9qZWN0c0xpc3QuaW5uZXJIVE1MID0gXCJcIjtcclxuICBUb2RvTGlzdC5zYXZlZFByb2plY3RzLmZvckVhY2goKHByb2plY3QpID0+IHtcclxuICAgIGNvbnN0IG5ld1Byb2plY3RFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO1xyXG4gICAgbmV3UHJvamVjdEVsZW1lbnQudGV4dENvbnRlbnQgPSBgJHtwcm9qZWN0Lm5hbWV9YDtcclxuICAgIG5ld1Byb2plY3RFbGVtZW50LmRhdGFzZXQuaWQgPSBwcm9qZWN0LmlkO1xyXG4gICAgaWYgKG5ld1Byb2plY3RFbGVtZW50LmRhdGFzZXQuaWQgPT09IFRvZG9MaXN0LmdldFNlbGVjdGVkUHJvamVjdElkKCkpIHtcclxuICAgICAgbmV3UHJvamVjdEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImFjdGl2ZS1wcm9qZWN0XCIpO1xyXG4gICAgfVxyXG4gICAgcHJvamVjdHNMaXN0LmFwcGVuZENoaWxkKG5ld1Byb2plY3RFbGVtZW50KTtcclxuICB9KTtcclxufVxyXG5cclxuLy9FdmVudDogU2VsZWN0IHByb2plY3RcclxucHJvamVjdHNMaXN0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG4gIFRvZG9MaXN0LnNhdmVTZWxlY3RlZFByb2plY3QoZS50YXJnZXQuZGF0YXNldC5pZCk7XHJcbiAgcmVuZGVyUHJvamVjdHMoKTtcclxuICByZW5kZXJUYXNrcygpO1xyXG59KTtcclxuXHJcbi8vRE9NIGVsZW1lbnRzIGZyb20gdGFza3Mgc2VjdGlvblxyXG5jb25zdCB0YXNrUHJvamVjdFRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YXNrcy10aXRsZSBoM1wiKTtcclxuY29uc3QgZGVsZXRlUHJvamVjdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZGVsZXRlLXByb2plY3RcIik7XHJcbmNvbnN0IHRhc2tzTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFza3MtbGlzdFwiKTtcclxuY29uc3QgdGFza1RlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0YXNrLXRlbXBsYXRlXCIpO1xyXG5jb25zdCBvcGVuTW9kYWxCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm9wZW4tbW9kYWxcIik7XHJcbmNvbnN0IGFkZFRhc2tNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxcIik7XHJcbmNvbnN0IHRhc2tGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbC1mb3JtXCIpO1xyXG5jb25zdCBidG5Nb2RhbENhbmNlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYnRuLW1vZGFsLWNhbmNlbFwiKTtcclxuY29uc3QgdGFza05hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFkZC10YXNrLWZpZWxkXCIpO1xyXG5jb25zdCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkLXRhc2stZGVzY3JpcHRpb25cIik7XHJcbmNvbnN0IGR1ZURhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Rhc2stZHVlLWRhdGVcIik7XHJcblxyXG4vL0V2ZW50OiBvcGVuIE1vZGFsXHJcbm9wZW5Nb2RhbEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICBvcGVuVGFza01vZGFsKCk7XHJcbiAgdGFza05hbWUuZm9jdXMoKTtcclxufSk7XHJcblxyXG4vL0V2ZW50OiBjbG9zZSBNb2RhbFxyXG5idG5Nb2RhbENhbmNlbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICBjbG9zZVRhc2tNb2RhbCgpO1xyXG59KTtcclxuXHJcbi8vRXZlbnQ6IEFkZCB0YXNrc1xyXG50YXNrRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIFRvZG9MaXN0LmFkZFRhc2sodGFza05hbWUudmFsdWUsIGRlc2NyaXB0aW9uLnZhbHVlLCBkdWVEYXRlLnZhbHVlKTtcclxuICBjbG9zZVRhc2tNb2RhbCgpO1xyXG4gIHJlbmRlclRhc2tzKCk7XHJcbn0pO1xyXG5cclxuLy9FdmVudDogY29tcGxldGUgVGFza1xyXG50YXNrc0xpc3QuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgaWYgKGUudGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJpbnB1dFwiKSB7XHJcbiAgICBUb2RvTGlzdC5tYXJrQ29tcGxldGVkVGFzayhlLnRhcmdldCk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8vRXZlbnQ6IGRlbGV0ZSB0YXNrXHJcbnRhc2tzTGlzdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwidGFzay1kZWwtaWNvblwiKSkge1xyXG4gICAgVG9kb0xpc3QuZGVsZXRlVGFzayhlLnRhcmdldCk7XHJcbiAgICByZW5kZXJUYXNrcygpO1xyXG4gIH1cclxufSk7XHJcblxyXG4vL0V2ZW50OiBVcGRhdGUgdGFzayBkdWUgZGF0ZVxyXG50YXNrc0xpc3QuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCAoZSkgPT4ge1xyXG4gIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJ0YXNrLWR1ZS1kYXRlXCIpKSB7XHJcbiAgICBUb2RvTGlzdC51cGRhdGVEdWVEYXRlKGUudGFyZ2V0KTtcclxuICAgIHJlbmRlclRhc2tzKCk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8vRXZlbnQ6IGRlbGV0ZSBwcm9qZWN0XHJcbmRlbGV0ZVByb2plY3RCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgVG9kb0xpc3QucmVtb3ZlUHJvamVjdCgpO1xyXG4gIHJlbmRlclByb2plY3RzKCk7XHJcbiAgcmVuZGVyVGFza3MoKTtcclxufSk7XHJcblxyXG5mdW5jdGlvbiByZW5kZXJUYXNrVGl0bGUoKSB7XHJcbiAgY29uc3QgY3VyclByb2plY3QgPSBUb2RvTGlzdC5nZXRTZWxlY3RlZFByb2plY3ROYW1lKCk7XHJcbiAgdGFza1Byb2plY3RUaXRsZS50ZXh0Q29udGVudCA9IGN1cnJQcm9qZWN0O1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXJUYXNrcygpIHtcclxuICBjb25zdCBjdXJyUHJvamVjdCA9IFRvZG9MaXN0LmdldFNlbGVjdGVkUHJvamVjdE5hbWUoKTtcclxuICB0YXNrc0xpc3QuaW5uZXJIVE1MID0gXCJcIjsgLy8gY2xlYXIgbGlzdFxyXG4gIHJlbmRlclRhc2tUaXRsZSgpO1xyXG5cclxuICBjb25zdCB0YXNrcyA9IFRvZG9MaXN0LmdldFRhc2tzKCk7XHJcbiAgdGFza3MuZm9yRWFjaCgodGFzaykgPT4ge1xyXG4gICAgY29uc3QgdGFza0VsZW1lbnQgPSB0YXNrVGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICBjb25zdCB0YXNrTmFtZSA9IHRhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFzay1uYW1lIGxhYmVsXCIpO1xyXG4gICAgY29uc3QgY2hlY2tCb3ggPSB0YXNrRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2stbmFtZSBpbnB1dFwiKTtcclxuICAgIGNvbnN0IHRhc2tEZXNjcmlwdGlvbiA9IHRhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFzay1kZXNjcmlwdGlvblwiKTtcclxuICAgIGNvbnN0IHRhc2tEdWVEYXRlID0gdGFza0VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi50YXNrLWR1ZS1kYXRlXCIpO1xyXG4gICAgY29uc3QgdGFza0RlbGV0ZUJ0biA9IHRhc2tFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFzay1kZWwtaWNvblwiKTtcclxuXHJcbiAgICBjaGVja0JveC5pZCA9IHRhc2suaWQ7XHJcbiAgICBjaGVja0JveC5jaGVja2VkID0gdGFzay5jb21wbGV0ZWQ7XHJcbiAgICB0YXNrTmFtZS5odG1sRm9yID0gdGFzay5pZDtcclxuICAgIHRhc2tOYW1lLmFwcGVuZCh0YXNrLnRhc2tOYW1lKTtcclxuICAgIHRhc2tEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IHRhc2suZGVzY3JpcHRpb247XHJcbiAgICB0YXNrRHVlRGF0ZS5pZCA9IHRhc2suaWQ7XHJcbiAgICB0YXNrRHVlRGF0ZS52YWx1ZSA9IHRhc2suZHVlRGF0ZTtcclxuICAgIHRhc2tEZWxldGVCdG4uaWQgPSB0YXNrLmlkO1xyXG5cclxuICAgIHRhc2tzTGlzdC5hcHBlbmRDaGlsZCh0YXNrRWxlbWVudCk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9wZW5UYXNrTW9kYWwoKSB7XHJcbiAgYWRkVGFza01vZGFsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsb3NlVGFza01vZGFsKCkge1xyXG4gIC8vY2xlYXIgZmllbGRzXHJcbiAgdGFza05hbWUudmFsdWUgPSBudWxsO1xyXG4gIGRlc2NyaXB0aW9uLnZhbHVlID0gbnVsbDtcclxuICBkdWVEYXRlLnZhbHVlID0gbnVsbDtcclxuICBhZGRUYXNrTW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJQcm9qZWN0IiwiY29uc3RydWN0b3IiLCJuYW1lIiwidGhpcyIsImlkIiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwidGFza3MiLCJUYXNrIiwidGFza05hbWUiLCJkZXNjcmlwdGlvbiIsImR1ZURhdGUiLCJjb21wbGV0ZWQiLCJUb2RvTGlzdCIsInN0YXRpYyIsIkpTT04iLCJwYXJzZSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJzZXRJdGVtIiwic3RyaW5naWZ5Iiwic2F2ZWRQcm9qZWN0cyIsInByb2plY3QiLCJuZXdQcm9qZWN0IiwicHVzaCIsInVwZGF0ZVN0b3JhZ2UiLCJmb3JFYWNoIiwiZmluZEluZGV4IiwiZ2V0U2VsZWN0ZWRQcm9qZWN0SWQiLCJjdXJyZW50UHJvamVjdCIsImdldFNlbGVjdGVkUHJvamVjdEluZGV4Iiwic3BsaWNlIiwidGFzayIsInNlbGVjdGVkVGFzayIsImZpbmQiLCJjaGVja2VkIiwidmFsdWUiLCJ0aW1lIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwic2hvd1RpbWUiLCJjdXJyZW50VGltZSIsIkRhdGUiLCJob3VyIiwiZ2V0SG91cnMiLCJtaW4iLCJnZXRNaW51dGVzIiwic2VjIiwiZ2V0U2Vjb25kcyIsImlubmVySFRNTCIsImFkZFplcm9Ub0Nsb2NrIiwic2V0VGltZW91dCIsInBhcnNlSW50Iiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJyZW5kZXJQcm9qZWN0cyIsInJlbmRlclRhc2tzIiwicHJvamVjdEZvcm0iLCJwcm9qZWN0SW5wdXRGaWVsZCIsInByb2plY3RzTGlzdCIsIm5ld1Byb2plY3RFbGVtZW50IiwiY3JlYXRlRWxlbWVudCIsInRleHRDb250ZW50IiwiZGF0YXNldCIsImNsYXNzTGlzdCIsImFkZCIsImFwcGVuZENoaWxkIiwicHJldmVudERlZmF1bHQiLCJhZGRQcm9qZWN0Iiwic2F2ZVNlbGVjdGVkUHJvamVjdCIsInRhcmdldCIsInRhc2tQcm9qZWN0VGl0bGUiLCJkZWxldGVQcm9qZWN0QnRuIiwidGFza3NMaXN0IiwidGFza1RlbXBsYXRlIiwib3Blbk1vZGFsQnRuIiwiYWRkVGFza01vZGFsIiwidGFza0Zvcm0iLCJidG5Nb2RhbENhbmNlbCIsImdldFNlbGVjdGVkUHJvamVjdE5hbWUiLCJjdXJyUHJvamVjdCIsInJlbmRlclRhc2tUaXRsZSIsImdldFRhc2tzIiwidGFza0VsZW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiY2hlY2tCb3giLCJ0YXNrRGVzY3JpcHRpb24iLCJ0YXNrRHVlRGF0ZSIsInRhc2tEZWxldGVCdG4iLCJodG1sRm9yIiwiYXBwZW5kIiwiY2xvc2VUYXNrTW9kYWwiLCJzdHlsZSIsImRpc3BsYXkiLCJmb2N1cyIsImFkZFRhc2siLCJ0YWdOYW1lIiwidG9Mb3dlckNhc2UiLCJtYXJrQ29tcGxldGVkVGFzayIsImNvbnRhaW5zIiwiZGVsZXRlVGFzayIsInVwZGF0ZUR1ZURhdGUiLCJyZW1vdmVQcm9qZWN0Il0sInNvdXJjZVJvb3QiOiIifQ==